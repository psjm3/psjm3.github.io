/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.7.1
 */
import{r as t,c as e,h as s,H as i,g as n}from"./p-92e0081d.js";import{c as o,d as a}from"./p-da52ad04.js";import{u as h,I as c}from"./p-dde84ba9.js";import{e as r,c as l,d}from"./p-f3b200c8.js";import{u,c as m,d as p,s as f}from"./p-5a01a0af.js";import{c as b,s as g,a as C}from"./p-c1f4eebb.js";import{c as T,d as y,a as D,H as I}from"./p-04160758.js";import"./p-37495475.js";import"./p-6b5a4209.js";import"./p-815f54db.js";import"./p-94978069.js";import"./p-73849894.js";import"./p-bed12e3b.js";import"./p-3a78f422.js";const j=60;const v=["CET","CST6CDT","EET","EST","EST5EDT","Factory","HST","MET","MST","MST7MDT","PST8PDT","UTC","WET"];function Z(t){const e="âˆ’";const s="-";return t.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace(e,s)}function w(t,e){const s=L(t,"en-US",e).replace("GMT","");if(s===""){return 0}return Number(Z(s))*j}function x(){const t=new Date;return t.getTimezoneOffset()*-1}function E(){const t=new Intl.DateTimeFormat;return t.resolvedOptions().timeZone}let S;async function M(t,e,s,i){const n=i.getTime();const o=Intl.supportedValuesOf("timeZone");if(s==="offset"){if(!S){S=Promise.all([import("./p-398cbed2.js"),import("./p-42c4808f.js")])}return S.then((async([{groupTimeZones:s},{DateEngine:i}])=>{const o=await s({dateEngine:new i,groupDateRange:1,startDate:new Date(n).toISOString()});const a=new Intl.ListFormat(t,{style:"long",type:"conjunction"});o.forEach((t=>{const e=[];let s=0;t.tzs.forEach(((t,i)=>{if(v.includes(t)){s++}e[i]=s}));t.tzs=t.tzs.filter((t=>!v.includes(t)));t.labelTzIndices=t.labelTzIndices.map((t=>t-e[t])).filter((e=>e>=0&&e<t.tzs.length))}));return o.map((({labelTzIndices:s,tzs:i})=>{const o=i[0];const h=Z(L(o,t,n));const c=w(o,n);const r=s.map((t=>{const s=i[t];const n=e[s];return n||s.split("/").pop()}));const l=k(e,h,a.format(r));return{label:l,value:c,filterValue:i.map((t=>P(t)))}})).filter((t=>!!t)).sort(((t,e)=>t.value-e.value))}))}return o.map((t=>{const e=P(t);const s=t;return{label:e,value:s,filterValue:t}})).filter((t=>!!t)).sort()}function P(t){return t.replace(/_/g," ")}function k(t,e,s){return t.timeZoneLabel.replace("{offset}",e).replace("{cities}",s)}function L(t,e,s=Date.now()){const i=r(e,{timeZone:t,timeZoneName:"shortOffset"});const n=i.formatToParts(s);return n.find((({type:t})=>t==="timeZoneName")).value}const O=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";const z=class{constructor(s){t(this,s);this.calciteInputTimeZoneBeforeClose=e(this,"calciteInputTimeZoneBeforeClose",6);this.calciteInputTimeZoneBeforeOpen=e(this,"calciteInputTimeZoneBeforeOpen",6);this.calciteInputTimeZoneChange=e(this,"calciteInputTimeZoneChange",6);this.calciteInputTimeZoneClose=e(this,"calciteInputTimeZoneClose",6);this.calciteInputTimeZoneOpen=e(this,"calciteInputTimeZoneOpen",6);this.setComboboxRef=t=>{this.comboboxEl=t};this.onComboboxBeforeClose=t=>{t.stopPropagation();this.calciteInputTimeZoneBeforeClose.emit()};this.onComboboxBeforeOpen=t=>{t.stopPropagation();this.calciteInputTimeZoneBeforeOpen.emit()};this.onComboboxChange=t=>{t.stopPropagation();const e=t.target;const s=this.findTimeZoneItem(e.selectedItems[0].getAttribute("data-value"));const i=`${s.value}`;if(this.value===i){return}this.value=i;this.selectedTimeZoneItem=s;this.calciteInputTimeZoneChange.emit()};this.onComboboxClose=t=>{t.stopPropagation();this.open=false;this.calciteInputTimeZoneClose.emit()};this.onComboboxOpen=t=>{this.open=true;t.stopPropagation();this.calciteInputTimeZoneOpen.emit()};this.disabled=false;this.form=undefined;this.maxItems=0;this.messages=undefined;this.messageOverrides=undefined;this.mode="offset";this.validationMessage=undefined;this.validationIcon=undefined;this.name=undefined;this.open=false;this.overlayPositioning="absolute";this.referenceDate=undefined;this.required=false;this.scale="m";this.status="idle";this.value=undefined;this.defaultMessages=undefined;this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.updateTimeZoneItemsAndSelection()}handleValueChange(t,e){const s=this.findTimeZoneItem(t);if(!s){this.value=e;return}this.selectedTimeZoneItem=s}async setFocus(){await b(this);await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){u(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}findTimeZoneItem(t){const e=t;return this.timeZoneItems.find((({value:t})=>t==e))}async updateTimeZoneItemsAndSelection(){this.timeZoneItems=await this.createTimeZoneItems();const t=this.mode==="offset"?x():E();const e=this.value??t;this.selectedTimeZoneItem=this.findTimeZoneItem(e);if(!this.selectedTimeZoneItem){this.selectedTimeZoneItem=this.findTimeZoneItem(t)}}async createTimeZoneItems(){if(!this.effectiveLocale||!this.messages){return[]}return M(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now()))}connectedCallback(){T(this);o(this);l(this);m(this)}disconnectedCallback(){y(this);a(this);d(this);p(this)}async componentWillLoad(){g(this);await f(this);await this.updateTimeZoneItemsAndSelection();const t=`${this.selectedTimeZoneItem.value}`;D(this,t);this.value=t}componentDidLoad(){C(this)}componentDidRender(){h(this)}render(){return s(i,null,s(c,{disabled:this.disabled},s("calcite-combobox",{clearDisabled:true,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,open:this.open,overlayPositioning:this.overlayPositioning,scale:this.scale,selectionMode:"single-persist",status:this.status,"validation-icon":this.validationIcon,"validation-message":this.validationMessage,ref:this.setComboboxRef},this.timeZoneItems.map((t=>{const e=this.selectedTimeZoneItem===t;const{label:i,value:n}=t;return s("calcite-combobox-item",{"data-value":n,key:i,selected:e,textLabel:i,value:`${t.filterValue}`})}))),s(I,{component:this})))}static get delegatesFocus(){return true}static get assetsDirs(){return["assets"]}get el(){return n(this)}static get watchers(){return{messageOverrides:["onMessagesChange"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleWatcher"]}}};z.style=O;export{z as calcite_input_time_zone};
//# sourceMappingURL=p-a4e34b64.entry.js.map